<article class="bg-white rounded-xl shadow overflow-hidden border border-tertiary">
    <div class="md:flex">
        <div class="md:w-1/3">
            {% if post.cover_image %}
                <img src="{{ post.cover_image.url }}" alt="{{ post.title }}"
                     class="w-full h-48 md:h-full object-cover"/>
            {% else %}
                <div class="w-full h-48 md:h-full bg-gray-200 flex items-center justify-center text-gray-500">
                    Нет обложки
                </div>
            {% endif %}
        </div>
        <div class="p-6 md:w-2/3">
            <div class="flex items-center text-sm text-text-body/70 mb-2">
                <a href="{{ post.location.get_absolute_url }}"
                   class="hover:text-primary transition">{{ post.location.name }}</a>
                <span class="mx-2">•</span>
                <time datetime="{{ post.published_at|date:'Y-m-d' }}">{{ post.published_at|date:"d E Y" }}</time>
            </div>
            <h3 class="text-xl font-bold mb-2">
                <a href="{{ post.get_absolute_url }}"
                   class="hover:text-primary transition">{{ post.title }}</a>
            </h3>
            <p class="text-text-body/80 mb-4">
                {{ post.meta_description|default:post.content_markdown|truncatewords:30 }}
            </p>
            <div class="flex flex-wrap gap-2 mb-4">
                {% for tag in post.tags.all %}
                    <a href="{{ tag.get_absolute_url }}"
                       class="px-2 py-1 bg-tertiary/20 text-primary text-xs rounded hover:bg-tertiary/40 transition">
                        {{ tag.name }}
                    </a>
                {% endfor %}
            </div>
            <div class="flex items-center text-sm text-text-body/70">
                <span>Автор: {{ post.author.get_full_name|default:post.author.username }}</span>
                <span class="mx-2">•</span>
                {% load humanize %}
                <span>Просмотров: {{ post.views_count|intcomma }}</span>
                <span class="mx-2">•</span>
                <span>Рейтинг:
                  <span class="text-primary">★{{ post.average_rating|default:"—" }}</span>
                  ({{ post.rating_count }})
                </span>
            </div>
        </div>
    </div>
</article>
